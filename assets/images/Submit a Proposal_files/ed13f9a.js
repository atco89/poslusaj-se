(function(ng){"use strict";ng.module("cfe.mobile",["components.core.modal","components.core.log"])})(angular);
(function(ng){"use strict";var module=ng.module("cfe.mobile");module.directive("cfeMobileBlurOnEnter",cfeMobileBlurOnEnter);cfeMobileBlurOnEnter.$inject=["cfeDeviceDetectorService"];function cfeMobileBlurOnEnter(cfeDeviceDetectorService){return{link:function(scope,element){if(cfeDeviceDetectorService.isMobileDevice()){element.on("keydown",function(event){if(event.which===13&&element.length){element[0].blur()}})}}}}})(angular);
(function(ng){"use strict";var module=ng.module("cfe.mobile");module.run(setScrollHandler);setScrollHandler.$inject=["$document","$timeout","cfeDeviceDetectorService"];function isTextInput(node){return["INPUT","TEXTAREA"].indexOf(node.nodeName)!==-1}function setScrollHandler($document,$timeout,cfeDeviceDetectorService){if(cfeDeviceDetectorService.isMobileDevice()){$document.on("touchstart",function(e){if(e.target!==$document[0].activeElement&&isTextInput($document[0].activeElement)){$timeout(function(){$document[0].activeElement.blur()},150,false)}})}}})(angular);
(function(ng){"use strict";var module=ng.module("cfe.mobile");module.factory("cfeDeviceDetectorService",cfeDeviceDetectorService);cfeDeviceDetectorService.$inject=["$window"];function cfeDeviceDetectorService($window){return{isIOS:isIOS,isAndroid:isAndroid,isMobileDevice:isMobileDevice,isMobileOrTabletDevice:isMobileOrTabletDevice};function isIOS(){return $window.navigator&&/iPad|iPhone|iPod/.test($window.navigator.userAgent)}function isAndroid(){return $window.navigator&&/Android/.test($window.navigator.userAgent)}function isMobileDevice(){var check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))){check=true}})(navigator.userAgent||navigator.vendor||window.opera);return check}function isMobileOrTabletDevice(){var check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))){check=true}})(navigator.userAgent||navigator.vendor||window.opera);return check}}})(angular);
(function(ng){"use strict";ng.module("cfe.mobile").run(DeviceStylesRun);DeviceStylesRun.$inject=["$document","cfeDeviceDetectorService"];function DeviceStylesRun($document,cfeDeviceDetectorService){if(cfeDeviceDetectorService.isIOS()){ng.element($document[0].body).addClass("ios-specific")}}})(angular);
(function(ng){"use strict";var module=ng.module("cfe.mobile");module.config(IOSModalFixDecoratorConfig);IOSModalFixDecoratorConfig.$inject=["$provide"];function IOSModalFixDecoratorConfig($provide){$provide.decorator("$modal",IOSModalFixDecorator);IOSModalFixDecorator.$inject=["$delegate","$document","$modalStack","cfeDeviceDetectorService"];var modalCount=0;function IOSModalFixDecorator($delegate,$document,$modalStack,cfeDeviceDetectorService){if(cfeDeviceDetectorService.isIOS()){var originalOpen=$delegate.open;$delegate.open=function decoratedOpen(options){if(options.hidden){return originalOpen.apply($delegate,arguments)}modalCount++;var topModal=$modalStack.getTop();var topModalElement=topModal&&topModal.value?topModal.value.modalDomEl:null;if(topModalElement){topModalElement.addClass("ios-modal-hidden")}var scrollTopPosition=$document[0].body.scrollTop;$document[0].documentElement.classList.add("ios-modal-fix");$document[0].body.scrollTop=0;var modal=originalOpen.apply($delegate,arguments);modal.result.finally(function(){if(topModalElement){topModalElement.removeClass("ios-modal-hidden")}modalCount--;if(modalCount===0){$document[0].documentElement.classList.remove("ios-modal-fix");$document[0].body.scrollTop=scrollTopPosition}});return modal}}return $delegate}}})(angular);
(function(ng){"use strict";var module=ng.module("cfe.mobile");module.directive("cfeClass",cfeClass);cfeClass.$inject=["$parse","$animate","cfeResponsiveService"];function cfeClass($parse,$animate,cfeResponsiveService){return{link:link};function link(scope,element,attr){var unregisterScreenSize;var oldSize;var stylesMap=generateStyleMap(attr["cfeClass"]);scope.$on("$destroy",function(){unregisterScreenSize()});unregisterScreenSize=cfeResponsiveService.listenScreenSizeChanged(function(event,params){updateSize(params.size)});function generateStyleMap(styles){var map={};if(!styles){return map}ng.forEach($parse(styles)(),function(classes,breakpointSizes){var sizes=breakpointSizes.split(",");ng.forEach(sizes,function(size){if(!map[size]){map[size]=[]}map[size]=map[size].concat(classes.split(" "))})});return map}function updateSize(newSize){updateStyles(stylesMap[newSize]||[],stylesMap[oldSize]||[]);oldSize=newSize}function updateStyles(newClasses,oldClasses){$animate.enabled(element,false);attr.$updateClass(newClasses.join(" "),oldClasses.join(" "));$animate.enabled(element,true)}updateSize(cfeResponsiveService.getScreenSize())}}})(angular);
(function(ng){"use strict";var module=ng.module("cfe.mobile");module.component("cfeResponsivePanel",{template:'<div data-ng-if="$ctrl.isEnabled"><ng-transclude></ng-transclude></div>',transclude:true,controller:cfeResponsivePanel,bindings:{matchSizes:"@?",isHiddenOnMatch:"@?"}});cfeResponsivePanel.$inject=["cfeResponsiveService"];function cfeResponsivePanel(cfeResponsiveService){var $ctrl=this;var matchSizes=[];var unwatchScreenSizeListener;var isMatchAnySize=false;$ctrl.isEnabled=false;$ctrl.$onInit=function(){if(ng.isString($ctrl.matchSizes)){isMatchAnySize=$ctrl.matchSizes==="*";if(!isMatchAnySize&&$ctrl.matchSizes.length>0){matchSizes=parseMatchSizesString($ctrl.matchSizes)}}var isHidden=$ctrl.isHiddenOnMatch==="true";$ctrl.isEnabled=isEnabled(isMatchAnySize||isSizeMatch(cfeResponsiveService.getScreenSize()),isHidden);if(!isMatchAnySize&&matchSizes.length>0){unwatchScreenSizeListener=cfeResponsiveService.listenScreenSizeChanged(function(event,params){$ctrl.isEnabled=isEnabled(isSizeMatch(params.size),isHidden)})}};$ctrl.$onDestroy=function(){if(ng.isFunction(unwatchScreenSizeListener)){unwatchScreenSizeListener()}$ctrl.isEnabled=false};function parseMatchSizesString(matchSizesString){var allMatchSizes=[];matchSizesString.split(",").forEach(function(optionSize){var options=optionSize.split("-");var size=options[0];var isUp=options.indexOf("up")>-1;var isDown=options.indexOf("down")>-1;var isEqual=options.indexOf("equal")>-1;if(isUp||isDown){if(isEqual){allMatchSizes.push(size)}if(isUp){allMatchSizes=allMatchSizes.concat(cfeResponsiveService.getBreakpointSizesUp(size))}else if(isDown){allMatchSizes=allMatchSizes.concat(cfeResponsiveService.getBreakpointSizesDown(size))}}else{allMatchSizes.push(size)}});var uniqueMatchSizes=[];allMatchSizes.forEach(function(size){if(uniqueMatchSizes.indexOf(size)===-1){uniqueMatchSizes.push(size)}});return uniqueMatchSizes}function isSizeMatch(size){return matchSizes.indexOf(size)>-1}function isEnabled(isMatch,isHidden){return isHidden&&!isMatch||!isHidden&&isMatch}}})(angular);
(function(ng){"use strict";var module=ng.module("cfe.mobile");module.factory("cfeResponsiveService",cfeResponsiveService);cfeResponsiveService.$inject=["$window","$rootScope"];function cfeResponsiveService($window,$rootScope){var SCREEN_SIZE_CHANGED_EVENT="screen-size:change";var originalViewport;var disableZoomCount=0;var breakpoints={xs:360,sm:480,md:768,lg:992};var screenSizes={xs:"xs",sm:"sm",md:"md",lg:"lg"};var currentSize;ng.element($window).on("resize",windowResizeListener);return{getScreenSize:getScreenSize,listenScreenSizeChanged:listenScreenSizeChanged,getBreakpointSizesUp:getBreakpointSizesUp,getBreakpointSizesDown:getBreakpointSizesDown,isMobileSize:isMobileSize,disableZoom:disableZoom,restoreZoom:restoreZoom,isPhoneSize:isPhoneSize};function listenScreenSizeChanged(callback){return $rootScope.$on(SCREEN_SIZE_CHANGED_EVENT,callback)}function windowResizeListener(){var newSize=_getScreenSize();if(newSize!==currentSize){var oldSize=currentSize;currentSize=newSize;$rootScope.$emit(SCREEN_SIZE_CHANGED_EVENT,{size:newSize,previous:oldSize,isMobileSize:isMobileSize()});$rootScope.$applyAsync()}}function getBreakpointSizesUp(breakpointName){return findBreakpointsAfter(Object.keys(breakpoints),breakpointName)}function getBreakpointSizesDown(breakpointName){return findBreakpointsAfter(Object.keys(breakpoints).reverse(),breakpointName).reverse()}function findBreakpointsAfter(breakpointNames,breakpointName){for(var i=0;i<breakpointNames.length;i++){if(breakpointNames[i]===breakpointName){return breakpointNames.splice(i+1)}}return[]}function getScreenSize(){if(ng.isUndefined(currentSize)){currentSize=_getScreenSize()}return currentSize}function _getScreenSize(){var items=Object.keys(breakpoints).reverse();for(var i=0;i<items.length;++i){var breakpointName=items[i];var breakpointWidth=breakpoints[breakpointName];var matchmedia=$window.matchMedia("(min-width: "+breakpointWidth+"px)");if(matchmedia.matches){return breakpointName}}return screenSizes.xs}function isMobileSize(){return["xs","sm","md"].indexOf(getScreenSize())>-1}function isPhoneSize(){return["xs","sm"].indexOf(getScreenSize())>-1}function getViewport(){var viewport=$window.document.querySelectorAll("meta[name=viewport]");return viewport.length?viewport[0]:null}function disableZoom(){var ZOOM_DISABLED_VIEWPORT="maximum-scale=1, user-scalable=no";var viewport=getViewport();if(viewport){if(!originalViewport){originalViewport=viewport.getAttribute("content")}disableZoomCount++;viewport.setAttribute("content",originalViewport+", "+ZOOM_DISABLED_VIEWPORT)}}function restoreZoom(){var viewport=getViewport();if(viewport&&originalViewport){disableZoomCount--;if(disableZoomCount===0){viewport.setAttribute("content",originalViewport)}}}}})(angular);
(function(ng){"use strict";var module=ng.module("cfe.mobile");module.directive("cfeResponsiveTrim",cfeResponsiveTrim);cfeResponsiveTrim.$inject=["$parse","cfeResponsiveService"];function cfeResponsiveTrim($parse,cfeResponsiveService){return{scope:{trimContent:"<"},link:link};function link(scope,element,attr){var unregisterScreenSize;var sizeMap=generateSizeMap(attr["cfeResponsiveTrim"]);scope.$on("$destroy",function(){unregisterScreenSize()});unregisterScreenSize=cfeResponsiveService.listenScreenSizeChanged(function(event,params){updateSize(params.size)});function generateSizeMap(sizeLimits){var map={};if(!sizeLimits){return map}ng.forEach($parse(sizeLimits)(),function(limit,breakpointSizes){var sizes=breakpointSizes.split(",");ng.forEach(sizes,function(size){map[size]=limit})});return map}function updateSize(newSize){updateContent(sizeMap[newSize]||0)}function updateContent(limit){var text="";if(!scope.trimContent){return}if(!limit||scope.trimContent.length<=limit){text=scope.trimContent}else{text=scope.trimContent.substr(0,limit).trim()+" ..."}element.text(text)}scope.$watch("trimContent",function(){updateSize(cfeResponsiveService.getScreenSize())});updateSize(cfeResponsiveService.getScreenSize())}}})(angular);